<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√©couverte Al√©atoire de Vins</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <h1>üç∑ D√©couverte Al√©atoire de Vins üé≤</h1>

        <div class="random-selection-steps">
            <!-- S√©lection du Pays -->
            <div class="selection-step">
                <h2>Pays üåç</h2>
                {{if .Selection.Country}}
                    <p class="selected-item">
                        {{.Selection.Country}} {{index .CountryEmojis .Selection.Country}}
                    </p>
                {{else}}
                    <p>Aucun pays s√©lectionn√©</p>
                {{end}}
                <a href="/?action=randomCountry" class="random-button">
                    üé≤ Pays Al√©atoire
                </a>
            </div>

            <!-- S√©lection de la R√©gion -->
            <div class="selection-step">
                <h2>R√©gion üèûÔ∏è</h2>
                {{if .Selection.Region}}
                    <p class="selected-item">
                        {{.Selection.Region}}
                    </p>
                {{else}}
                    <p>Aucune r√©gion s√©lectionn√©e</p>
                {{end}}
                {{if .Selection.Country}}
                    <a href="/?action=randomRegion" class="random-button">
                        üé≤ R√©gion Al√©atoire
                    </a>
                {{else}}
                    <button class="random-button disabled" disabled>
                        S√©lectionnez un pays d'abord
                    </button>
                {{end}}
            </div>

            <!-- S√©lection de la Vari√©t√© -->
            <div class="selection-step">
                <h2>Vari√©t√© üçá</h2>
                {{if .Selection.Variety}}
                    <p class="selected-item">
                        {{.Selection.Variety}}
                    </p>
                {{else}}
                    <p>Aucune vari√©t√© s√©lectionn√©e</p>
                {{end}}
                {{if and .Selection.Country .Selection.Region}}
                    <a href="/?action=randomVariety" class="random-button">
                        üé≤ Vari√©t√© Al√©atoire
                    </a>
                {{else}}
                    <button class="random-button disabled" disabled>
                        S√©lectionnez un pays et une r√©gion d'abord
                    </button>
                {{end}}
            </div>
        </div>

        <!-- R√©sultats des Vins -->
        <div class="wine-results">
            <h2>Vins Correspondants</h2>
            {{if and .Selection.Country .Selection.Region .Selection.Variety}}
                {{if .SelectedWines}}
                    <div class="wine-grid">
                        {{range .SelectedWines}}
                        <div class="wine-card">
                            <h3>{{.Title}}</h3>
                            <p>{{.Winery}} - {{.Variety}}</p>
                            <p>{{.Region}}, {{.Country}} {{index $.CountryEmojis .Country}}</p>
                            <p>Prix: {{printf "%.2f" .Price}}‚Ç¨</p>
                            <p>Notes: {{.Points}}/100</p>
                            <p>{{.Description}}</p>
                        </div>
                        {{end}}
                    </div>
                {{else}}
                    <p>Aucun vin trouv√© pour cette s√©lection.</p>
                {{end}}
            {{else}}
                <p>S√©lectionnez un pays, une r√©gion et une vari√©t√© pour voir les vins.</p>
            {{end}}
        </div>
    </div>
</body>
</html>